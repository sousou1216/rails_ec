<%# 右側のカート部分 %>
<div class="col-md-5 col-lg-4 order-md-last">
  <h4 class="d-flex justify-content-between align-items-center mb-3">
    <span class="text-primary">Your cart</span>
    <span class="badge bg-primary rounded-pill">
    <%# カート数表示 %>
      <% if session[:cart].nil? || session[:cart].empty? %>
        0
      <% else %>
        <%= session[:cart].length %>
      <% end %>
    </span>
  </h4>

  <%# 初期値の設定 %>
  <% total_price = 0 %>
  <ul class="list-group mb-3">
    <%# カートの中身を表示 %>
    <% session[:cart].each do |item| %>
      <li class="list-group-item d-flex justify-content-between lh-sm">  
        <div> 
          <h6 class="my-0"><%= item['name'] %></h6>
          <small class="text-body-secondary"><%= item['description'] %></small>
        </div>
        <%# divで囲むことで表示位置を整える %>
        <div>
          <span class="text-body-secondary"><%= item['price'] %></span>
          <%= link_to 'delete', carts_delete_from_cart_path(id: item), data: { turbo_method: :delete }, class: "btn btn-outline-dark mt-auto" %>
        </div>
        <%# 各アイテムの価格を合計に追加 %>
        <% total_price += item['price'].to_i %>
      </li>
    <% end %>

    <li class="list-group-item d-flex justify-content-between bg-body-tertiary">
      <div class="text-success">
        <h6 class="my-0">Promo code</h6>
        <small>EXAMPLECODE</small>
      </div>
      <% promo_price = -5 %>
      <span class="text-success"><%= promo_price %></span>
      <%# 各アイテムの価格を合計に追加 %>
      <% total_price += promo_price.to_i %>
    </li>

    <li class="list-group-item d-flex justify-content-between">
      <span>Total (USD)</span>
      <strong><%= total_price %></strong>
    </li>
  </ul>

  <form class="card p-2">
    <div class="input-group">
      <input type="text" class="form-control" placeholder="Promo code">
      <button type="submit" class="btn btn-secondary">Redeem</button>
    </div>
  </form>
</div>